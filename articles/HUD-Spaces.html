<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>HUD Spaces | Rich HUD Framework </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="HUD Spaces | Rich HUD Framework ">
      
      
      <link rel="icon" href="../resources/images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ZachHembree/RichHudFramework.Client/blob/docfx/articles/HUD-Spaces.md/#L1">

      <!-- Optional nav title customization -->
      <meta name="loc:inThisArticle" content="Sections">
      
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand d-flex align-items-center" href="../index.html">
            <img id="logo" class="svg me-2" src="../resources/images/logo.svg" alt="Rich HUD Framework">
            
            <!-- Vertical divider -->
            <span class="vr align-self-stretch opacity-75" aria-hidden="true"></span>
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="hud-spaces">HUD Spaces</h1>

<p>This framework renders all UI elements with textured quads positioned in <strong>world space</strong>. Each element belongs to a <strong>HUD Space Node</strong> that defines a 2D plane embedded within the 3D world. Child elements are drawn onto this plane using the node's <strong>Plane-To-World (PTW)</strong> matrix.</p>
<p>By default, UI elements inherit the <strong>Pixel-To-World</strong> transform provided by <a class="xref" href="../api/RichHudFramework.UI.Client.HudMain.html">HudMain</a>. This transform emulates screen-space rendering: units are in pixels, the origin (0, 0) is at the screen center, and elements appear fixed relative to the viewport. Although the underlying geometry is still world-space billboards (required by the Space Engineers rendering API), this default behavior is functionally equivalent to a 2D screen overlay and is referred to throughout the documentation as “screen space” for simplicity.</p>
<h3 id="space-node-types">Space Node Types</h3>
<p>The framework currently provides three concrete HUD space node implementations:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Purpose</th>
<th>Recommended Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="xref" href="../api/RichHudFramework.UI.ScaledSpaceNode.html">ScaledSpaceNode</a></td>
<td>Applies a uniform scale factor to the parent space's XY plane.</td>
<td>Simple resizing of screen-space UI (e.g., global UI scaling, high-DPI adjustments)</td>
</tr>
<tr>
<td><a class="xref" href="../api/RichHudFramework.UI.CustomSpaceNode.html">CustomSpaceNode</a></td>
<td>Allows complete control over the PTW matrix via a user-supplied delegate callback every frame</td>
<td>Attaching UI to dynamic world entities, fully custom coordinate systems</td>
</tr>
<tr>
<td><a class="xref" href="../api/RichHudFramework.UI.CamSpaceNode.html">CamSpaceNode</a></td>
<td>Constructs the PTW matrix from the player camera matrix with optional rotation, translation, and scaling</td>
<td>View-aligned “floating” HUDs or world-space panels that track the camera</td>
</tr>
</tbody>
</table>
<p>If matrix mathematics or coordinate-space transformations are unfamiliar, the Transformations section of <a href="https://learnopengl.com/Getting-started/Transformations">LearnOpenGL</a> has an excellent primer.</p>
<h3 id="core-functions">Core Functions</h3>
<p>Every HUD space node performs three critical tasks each frame:</p>
<ol>
<li><strong>PTW Matrix Calculation</strong> – Supplies the transformation that positions and orients its plane in world space.</li>
<li><strong>Cursor Projection</strong> – Computes the exact world-space point where the mouse cursor intersects the plane, then transforms that point back into the node's local 2D coordinates. This ensures accurate mouse-over detection and input handling regardless of the node's orientation or distance from the camera.</li>
<li><strong>Depth Sorting Reference</strong> – Provides a representative 3D position (usually the plane origin) used for painter's-algorithm sorting of semi-transparent UI elements.</li>
</ol>
<h3 id="use-cases">Use Cases</h3>
<p>HUD Spaces can be divided into two categories of behavior: screen-space and world-space.</p>
<h4 id="screen-space-emulation">Screen-Space Emulation</h4>
<p><a class="xref" href="../api/RichHudFramework.UI.Client.HudMain.html#RichHudFramework_UI_Client_HudMain_Root">Root</a> and <a class="xref" href="../api/RichHudFramework.UI.Client.HudMain.html#RichHudFramework_UI_Client_HudMain_HighDpiRoot">HighDpiRoot</a> are pre-configured nodes that place their plane on the camera's near clip plane with pixel units. This is how the framework achieves the illusion of a true 2D overlay despite the API only exposing 3D billboards (see: <a class="xref" href="https://keensoftwarehouse.github.io/SpaceEngineersModAPI/api/VRage.Game.MyTransparentGeometry.html">MyTransparentGeometry</a>).</p>
<h4 id="diegetic--world-space-ui">Diegetic / World-Space UI</h4>
<p>By parenting UI elements to a <code>CustomSpaceNode</code> whose matrix is derived from a cockpit block, door, or any <a class="xref" href="https://keensoftwarehouse.github.io/SpaceEngineersModAPI/api/VRage.Game.ModAPI.Ingame.IMyEntity.html">IMyEntity</a>, developers can create interfaces that naturally track objects in the game world (e.g., control panels, status readouts on machinery, holographic menus).</p>
<h3 id="depth-sorting">Depth Sorting</h3>
<p>All UI elements are rendered as semi-transparent textured quads. Correct blending order is essential to avoid visual artifacts. The framework sorts entire HUD spaces (not individual elements) by the distance from the camera to each space's origin. Spaces farther away are drawn first; closer spaces are drawn last. This per-space painter's algorithm ensures consistent and predictable transparency behavior even when multiple overlapping world-space HUDs are present.</p>
<h3 id="live-demonstration">Live Demonstration</h3>
<p>A demo of <code>CamSpaceNode</code> is available in the Rich HUD Terminal. Enable debugging with the chat command <code>/rhd toggleDebug</code> and open the Demo page to experiment with real-time scaling, rotation, and offset parameters.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ZachHembree/RichHudFramework.Client/blob/docfx/articles/HUD-Spaces.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
